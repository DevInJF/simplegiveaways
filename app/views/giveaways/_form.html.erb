<%= semantic_form_for @giveaway, :html => { :multipart => true } do |f| %>

  <%= f.semantic_errors %>

	<%= f.inputs do %>
		<%= f.input :facebook_page, :collection => current_user.facebook_pages, :prompt => "Select one..." %>
	  <%= f.input :title %>
	  <%= f.input :prize %>
	  <%= f.input :description %>
	  <%= f.input :start_date, :as => :date_picker %>
	  <%= f.input :end_date, :as => :date_picker %>
		<%= f.input :image, :as => :file %>
	  <%= f.input :feed_image, :as => :file %>
		<div class="input-group">
	  	<%= f.input :optional_likes, :as => :string, :input_html => { :class => 'optional-likes' } %>
			<span class="button pill">
				<%= link_to "Add Another Page", "#", :class => "add-item" %>
			</span>
		</div>
	  <%= f.input :terms %>
	<% end %>

  <%= f.buttons do %>
    <%= f.commit_button %>
  <% end %>
<% end %>

<%= javascript_tag do %>
	$(function(){
		$('input.ui-date-picker').datetimepicker({
			ampm: true
		});
		$('a.add-item').click(function(e){
			e.preventDefault();
			var parent = $(this).parents(".input-group");
			if (parent.find("input").length < 3) {
				$(this).parents(".input-group").append('<li><input class="optional-likes" name="giveaway[optional_likes]" type="text"></li>');				
			} else {
				if (parent.find("div.error").length < 1) {
					$(this).parents(".input-group").prepend('<div class="error">You have reached the maximum number of optional likes</div>');
				}
			}
		});
	});
<% end %>
